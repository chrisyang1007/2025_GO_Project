<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>çŒœæ•¸å­—ç«¶æŠ€ç‰ˆ</title>
<style>
body {
  font-family: Arial;
  text-align: center;
  margin-top: 40px;
}
input, button {
  font-size: 1.2em;
  padding: 8px;
  margin: 10px;
}
#result {
  font-size: 1.3em;
  margin-top: 20px;
}
table {
  margin: 20px auto;
  border-collapse: collapse;
}
th, td {
  border: 1px solid #ccc;
  padding: 8px 12px;
}
</style>
</head>
<body>
<h2>ğŸ® çŒœæ•¸å­—ç«¶æŠ€ç‰ˆ</h2>
<p>æˆ‘å·²é¸å¥½ä¸€å€‹ 1 åˆ° 100 çš„æ•¸å­—ï¼Œä¾†æŒ‘æˆ°å§ï¼</p>
<p>â±ï¸ æ™‚é–“ï¼š<span id="timer">0</span> ç§’</p>
<input id="guess" type="number" placeholder="è¼¸å…¥ä½ çš„çŒœæ¸¬">
<button onclick="checkGuess()">çŒœï¼</button>
<p id="result"></p>
<button onclick="resetGame()">é‡æ–°é–‹å§‹</button>
<br><br>
<button onclick="location.href='index.html'">è¿”å›èŠå¤©å®¤</button>

<h3>ğŸ† æ’è¡Œæ¦œ</h3>
<table>
  <thead>
    <tr><th>æš±ç¨±</th><th>æ¬¡æ•¸</th><th>æ™‚é–“ (ç§’)</th></tr>
  </thead>
  <tbody id="leaderboard"></tbody>
</table>

<script>
let answer = Math.floor(Math.random() * 100) + 1;
let attempts = 0;
let startTime = Date.now();
let timerInterval = setInterval(updateTimer, 1000);
let finished = false;

function updateTimer() {
  if (!finished) {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    document.getElementById("timer").textContent = elapsed;
  }
}

function checkGuess() {
  const guess = parseInt(document.getElementById("guess").value);
  if (isNaN(guess) || guess < 1 || guess > 100) {
    document.getElementById("result").textContent = "è«‹è¼¸å…¥ 1 åˆ° 100 çš„æ•´æ•¸ï¼";
    return;
  }
  attempts++;
  if (guess < answer) {
    document.getElementById("result").textContent = `å¤ªå°äº†ï¼ç›®å‰çŒœäº† ${attempts} æ¬¡`;
  } else if (guess > answer) {
    document.getElementById("result").textContent = `å¤ªå¤§äº†ï¼ç›®å‰çŒœäº† ${attempts} æ¬¡`;
  } else {
    finished = true;
    clearInterval(timerInterval);
    const timeUsed = Math.floor((Date.now() - startTime) / 1000);
    document.getElementById("result").textContent = `ğŸ‰ æ­å–œä½ çŒœå°äº†ï¼ç¸½å…±çŒœäº† ${attempts} æ¬¡ï¼Œç”¨äº† ${timeUsed} ç§’`;
    setTimeout(() => {
      const name = prompt("è«‹è¼¸å…¥æš±ç¨±ä»¥åŠ å…¥æ’è¡Œæ¦œï¼š");
      if (name) {
        saveScore(name, attempts, timeUsed);
        renderLeaderboard();
      }
    }, 500);
  }
}

function resetGame() {
  answer = Math.floor(Math.random() * 100) + 1;
  attempts = 0;
  startTime = Date.now();
  finished = false;
  document.getElementById("guess").value = "";
  document.getElementById("result").textContent = "";
  document.getElementById("timer").textContent = "0";
  clearInterval(timerInterval);
  timerInterval = setInterval(updateTimer, 1000);
}

function saveScore(name, tries, time) {
  const scores = JSON.parse(localStorage.getItem("leaderboard") || "[]");
  scores.push({ name, tries, time });
  scores.sort((a, b) => a.tries - b.tries || a.time - b.time);
  localStorage.setItem("leaderboard", JSON.stringify(scores.slice(0, 10)));
}

function renderLeaderboard() {
  const scores = JSON.parse(localStorage.getItem("leaderboard") || "[]");
  const tbody = document.getElementById("leaderboard");
  tbody.innerHTML = "";
  scores.forEach(score => {
    const row = document.createElement("tr");
    row.innerHTML = `<td>${score.name}</td><td>${score.tries}</td><td>${score.time}</td>`;
    tbody.appendChild(row);
  });
}

renderLeaderboard();
</script>
</body>
</html>